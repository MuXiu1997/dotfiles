{{- if (eq .chezmoi.os "darwin") -}}
#!/usr/bin/env bash

set -euo pipefail

echo "ğŸº Installing Homebrew packages using install-packages script..."

{{- /* Generate install-packages arguments from homebrew configuration */ -}}
{{- $packages := includeTemplate "homebrewPackages" . | fromYaml -}}

# Run install-packages script if there are packages to install
{{- if $packages }}
echo "ğŸ“¦ Installing {{ len $packages }} packages..."
deno run -A --quiet --ext ts "{{ joinPath .chezmoi.sourceDir "dot_local/bin/executable_install-packages" }}"{{- range $packages }} "{{ . }}"{{- end }}
{{- else }}
echo "â„¹ï¸  No packages to install"
{{- end }}

echo "âœ… Package installation completed!"
{{- end }}
